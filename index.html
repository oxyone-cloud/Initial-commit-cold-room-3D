<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Chambre Froide - Finition Pro</title>
    <style>
        body { margin: 0; overflow: hidden; background: #050505; font-family: sans-serif; }
        #ui-controls {
            position: absolute; top: 20px; left: 20px;
            background: rgba(0, 0, 0, 0.85); color: white;
            padding: 20px; border-radius: 10px; border: 2px solid #fff;
            z-index: 1000; width: 220px;
        }
        .temp-val { font-size: 32px; font-weight: bold; color: #00aaff; margin: 10px 0; }
        input[type=range] { width: 100%; cursor: pointer; }
    </style>
</head>
<body>
    <div id="ui-controls">
        <div style="font-size: 11px; color: #aaa;">MONITORING INDUSTRIEL</div>
        <div id="tempDisplay" class="temp-val">4.0°C</div>
        <input type="range" id="tempSlider" min="-20" max="20" value="4" step="0.5">
        <div id="status" style="color:#00ff88; font-weight:bold; margin-top:10px;">NORMAL</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        camera.position.set(15, 12, 15);

        scene.add(new THREE.AmbientLight(0xffffff, 0.7));
        const light = new THREE.PointLight(0xffffff, 1);
        light.position.set(10, 20, 10);
        scene.add(light);
        
        scene.add(new THREE.GridHelper(30, 30, 0x333333, 0x222222));

        // --- CHAMBRE (Parois Bleu Eau) ---
        const chamberGeo = new THREE.BoxGeometry(10, 8, 10);
        const chamberMat = new THREE.MeshStandardMaterial({ 
            color: 0x0077be, transparent: true, opacity: 0.35, metalness: 0.3
        });
        const chamber = new THREE.Mesh(chamberGeo, chamberMat);
        chamber.position.y = 4;
        scene.add(chamber);

        // --- STRUCTURE EXTÉRIEURE ÉPAISSE (Gris) ---
        // On utilise des cylindres ou des boites fines pour simuler des traits épais
        const frameMat = new THREE.MeshStandardMaterial({ color: 0x555555 });
        function addBar(w, h, d, x, y, z) {
            const bar = new THREE.Mesh(new THREE.BoxGeometry(w, h, d), frameMat);
            bar.position.set(x, y, z);
            scene.add(bar);
        }
        // Montants verticaux épais
        addBar(0.4, 8, 0.4, 5, 4, 5); addBar(0.4, 8, 0.4, -5, 4, 5);
        addBar(0.4, 8, 0.4, 5, 4, -5); addBar(0.4, 8, 0.4, -5, 4, -5);

        // --- COINS BLANCS INTÉRIEURS (Profilés 90°) ---
        const cornerMat = new THREE.MeshStandardMaterial({ color: 0xffffff });
        function addCorner(x, z) {
            const c = new THREE.Mesh(new THREE.BoxGeometry(0.2, 7.8, 0.2), cornerMat);
            c.position.set(x, 4, z);
            scene.add(c);
        }
        addCorner(4.8, 4.8); addCorner(-4.8, 4.8);
        addCorner(4.8, -4.8); addCorner(-4.8, -4.8);

        // --- PORTE ---
        const door = new THREE.Mesh(
            new THREE.BoxGeometry(3, 6, 0.2),
            new THREE.MeshStandardMaterial({ color: 0x222222 })
        );
        door.position.set(0, 3, 5);
        scene.add(door);

        // --- ÉVAPORATEUR UNIQUE ---
        const evap = new THREE.Mesh(
            new THREE.BoxGeometry(4, 1.2, 1.5),
            new THREE.MeshStandardMaterial({ color: 0xeeeeee })
        );
        evap.position.set(0, 6.8, -3.5);
        scene.add(evap);

        // --- MOTEUR EXTÉRIEUR ---
        const motor = new THREE.Mesh(
            new THREE.BoxGeometry(2.5, 2.5, 2.5),
            new THREE.MeshStandardMaterial({ color: 0x333333 })
        );
        motor.position.set(6.5, 1.5, 0);
        scene.add(motor);

        // --- LOGIQUE SLIDER ---
        const slider = document.getElementById('tempSlider');
        const display = document.getElementById('tempDisplay');
        const status = document.getElementById('status');

        slider.addEventListener('input', (e) => {
            const val = parseFloat(e.target.value);
            display.innerText = val.toFixed(1) + "°C";
            if(val > 7) {
                display.style.color = "#ff4444";
                status.innerText = "ALERTE : TEMP. ÉLEVÉE";
                status.style.color = "#ff4444";
                chamberMat.color.setHex(0xff3333);
            } else {
                display.style.color = "#00aaff";
                status.innerText = "NORMAL";
                status.style.color = "#00ff88";
                chamberMat.color.setHex(0x0077be);
            }
        });

        function animate() { requestAnimationFrame(animate); controls.update(); renderer.render(scene, camera); }
        animate();
    </script>
</body>
</html>
