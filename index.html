<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Chambre Froide Pro - Équipement Complet</title>
    <style>
        body { margin: 0; overflow: hidden; background: #050505; font-family: sans-serif; }
        #ui-controls {
            position: absolute; top: 20px; left: 20px;
            background: rgba(0, 0, 0, 0.85); color: white;
            padding: 20px; border-radius: 10px; border: 2px solid #555;
            z-index: 1000; width: 220px;
        }
        .temp-val { font-size: 32px; font-weight: bold; color: #00aaff; margin: 10px 0; }
        input[type=range] { width: 100%; cursor: pointer; }
    </style>
</head>
<body>
    <div id="ui-controls">
        <div style="font-size: 12px; color: #888;">SYSTÈME DE SURVEILLANCE</div>
        <div id="tempDisplay" class="temp-val">4.0°C</div>
        <input type="range" id="tempSlider" min="-20" max="20" value="4" step="0.5">
        <div id="status" style="color:#00ff88; font-weight:bold; margin-top:10px;">NORMAL</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        camera.position.set(15, 12, 15);

        scene.add(new THREE.AmbientLight(0xffffff, 0.6));
        const light = new THREE.PointLight(0xffffff, 1);
        light.position.set(10, 20, 10);
        scene.add(light);
        
        scene.add(new THREE.GridHelper(30, 30, 0x333333, 0x222222));

        // --- STRUCTURE PRINCIPALE ---
        const geometry = new THREE.BoxGeometry(10, 8, 10);
        const material = new THREE.MeshStandardMaterial({ 
            color: 0x0077be, 
            transparent: true, 
            opacity: 0.3,
            metalness: 0.4,
            roughness: 0.3
        });
        const chamber = new THREE.Mesh(geometry, material);
        chamber.position.y = 4;
        scene.add(chamber);

        const lineMat = new THREE.LineBasicMaterial({ color: 0x888888, linewidth: 2 });
        const wireframe = new THREE.LineSegments(new THREE.EdgesGeometry(geometry), lineMat);
        wireframe.position.y = 4;
        scene.add(wireframe);

        // --- LA PORTE ---
        const door = new THREE.Mesh(
            new THREE.PlaneGeometry(3, 6),
            new THREE.MeshStandardMaterial({ color: 0x333333, side: THREE.DoubleSide })
        );
        door.position.set(0, 3, 5.01);
        scene.add(door);

        // --- ÉVAPORATEUR (Intérieur) ---
        const evapGroup = new THREE.Group();
        const evapBody = new THREE.Mesh(
            new THREE.BoxGeometry(4, 1.5, 2),
            new THREE.MeshStandardMaterial({ color: 0xcccccc })
        );
        evapGroup.add(evapBody);
        
        // Petits ventilos de l'évaporateur
        for(let i = -1; i <= 1; i++) {
            const fan = new THREE.Mesh(new THREE.CircleGeometry(0.5, 32), new THREE.MeshBasicMaterial({color: 0x333333}));
            fan.position.set(i*1.2, 0, 1.01);
            evapGroup.add(fan);
        }
        evapGroup.position.set(0, 6.5, -3);
        scene.add(evapGroup);

        // --- MOTEUR EXTÉRIEUR (Groupe Condenseur) ---
        const motorGroup = new THREE.Group();
        const motorBody = new THREE.Mesh(
            new THREE.BoxGeometry(3, 3, 3),
            new THREE.MeshStandardMaterial({ color: 0x444444 })
        );
        motorGroup.add(motorBody);
        
        const mainFan = new THREE.Mesh(new THREE.CircleGeometry(1.2, 32), new THREE.MeshBasicMaterial({color: 0x111111}));
        mainFan.position.set(1.51, 0, 0);
        mainFan.rotation.y = Math.PI / 2;
        motorGroup.add(mainFan);

        motorGroup.position.set(6.6, 1.5, 2);
        scene.add(motorGroup);

        // --- LOGIQUE INTERACTIVE ---
        const slider = document.getElementById('tempSlider');
        const display = document.getElementById('tempDisplay');
        const status = document.getElementById('status');

        slider.addEventListener('input', (e) => {
            const val = parseFloat(e.target.value);
            display.innerText = val.toFixed(1) + "°C";
            if(val > 7) {
                lineMat.color.setHex(0xff4444);
                display.style.color = "#ff4444";
                status.innerText = "ALERTE : TEMP. ÉLEVÉE";
                status.style.color = "#ff4444";
            } else {
                lineMat.color.setHex(0x888888);
                display.style.color = "#00aaff";
                status.innerText = "NORMAL";
                status.style.color = "#00ff88";
            }
        });

        function animate() { 
            requestAnimationFrame(animate); 
            controls.update(); 
            renderer.render(scene, camera); 
        }
        animate();
    </script>
</body>
</html>
