<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Oxyone - Fleet Manager Pro</title>
    <style>
        body { margin: 0; overflow: hidden; background: #1a1a1a; font-family: 'Inter', 'Segoe UI', sans-serif; color: white; }
        
        /* Panel Supervision Style Image */
        #ui-panel {
            position: absolute; top: 30px; left: 30px;
            background: rgba(15, 15, 15, 0.9); padding: 25px; border-radius: 20px; 
            border: 2px solid #00aaff; z-index: 100; width: 340px;
            box-shadow: 0 0 30px rgba(0, 170, 255, 0.2);
        }
        
        /* Contact Style Image (Haut Droite) */
        #contact-info {
            position: absolute; top: 30px; right: 30px;
            text-align: right; z-index: 100;
        }
        .contact-email { color: #00aaff; font-size: 14px; font-weight: 500; }
        .contact-phone { color: #00aaff; font-size: 16px; font-weight: bold; margin-top: 5px; }
        .startup-tag { color: #888; font-size: 12px; margin-top: 10px; }

        h2 { margin: 0; font-size: 22px; color: #fff; }
        .sub-title { font-size: 11px; color: #888; text-transform: uppercase; margin-bottom: 20px; letter-spacing: 1px; }

        .control-group { margin-bottom: 20px; }
        .label-row { display: flex; justify-content: space-between; font-size: 12px; color: #aaa; margin-bottom: 8px; }
        .current-val { color: #00aaff; font-weight: bold; font-size: 14px; }
        
        input[type=range] { -webkit-appearance: none; width: 100%; background: #333; height: 4px; border-radius: 2px; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: #00aaff; cursor: pointer; box-shadow: 0 0 10px #00aaff; }

        .status-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 20px; }
        .unit-btn { padding: 8px; border-radius: 8px; font-size: 10px; text-align: center; border: 1px solid #444; font-weight: bold; }
        .ok { border-color: #00ff88; color: #00ff88; background: rgba(0, 255, 136, 0.1); }
        .warn { border-color: #ff4444; color: #ff4444; background: rgba(255, 68, 68, 0.1); animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0.4; } }
    </style>
</head>
<body>

    <div id="ui-panel">
        <h2>Oxyone - Fleet Manager</h2>
        <div class="sub-title">Architecture Grande Distribution - Hypermarché</div>
        
        <div class="control-group">
            <div class="label-row">
                <span>Température Moyenne (°C)</span>
                <span id="tVal" class="current-val">2.0°C</span>
            </div>
            <input type="range" id="tSlider" min="-15" max="25" value="2">
        </div>

        <div class="control-group">
            <div class="label-row">
                <span>Charge Volumique (kg/m³)</span>
                <span id="wVal" class="current-val">120 kg/m³</span>
            </div>
            <input type="range" id="wSlider" min="0" max="500" value="120">
        </div>

        <div class="status-grid">
            <div id="u1" class="unit-btn ok">UNIT-01</div>
            <div id="u2" class="unit-btn ok">UNIT-02</div>
            <div id="u3" class="unit-btn warn">UNIT-03</div>
        </div>
    </div>

    <div id="contact-info">
        <div class="contact-email">benhamamouchothman@gmail.com</div>
        <div class="contact-phone">+213 782 09 02 81</div>
        <div class="startup-tag">Startup Labellisée @ 2021</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        // SCENE & RENDERER
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x0a0a0a);
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        document.body.appendChild(renderer.domElement);
        
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        camera.position.set(20, 15, 25);

        // LIGHTING (Style Photo)
        const amb = new THREE.AmbientLight(0xffffff, 0.3); scene.add(amb);
        const sun = new THREE.DirectionalLight(0xffffff, 0.8);
        sun.position.set(10, 20, 10); sun.castShadow = true; scene.add(sun);
        const blueLight = new THREE.PointLight(0x00aaff, 1, 50);
        blueLight.position.set(0, 5, 0); scene.add(blueLight);

        // FLOOR
        const floorGeo = new THREE.PlaneGeometry(100, 100);
        const floorMat = new THREE.MeshStandardMaterial({ color: 0x111111, roughness: 0.8 });
        const floor = new THREE.Mesh(floorGeo, floorMat);
        floor.rotation.x = -Math.PI/2; floor.receiveShadow = true; scene.add(floor);
        scene.add(new THREE.GridHelper(100, 50, 0x222222, 0x151515));

        // ASSETS DIMENSIONS
        const L=2.74, W=1.83, H=2.0;

        // --- RACKS LOGISTIQUES (LATÉRAUX) ---
        function createIndustrialRack(x, z) {
            const group = new THREE.Group();
            const frameMat = new THREE.MeshStandardMaterial({color: 0x555555, metalness: 0.7});
            // Montants
            for(let i=0; i<4; i++) {
                const p = new THREE.Mesh(new THREE.BoxGeometry(0.1, 5, 0.1), frameMat);
                p.position.set(i%2==0?-1:1, 2.5, i<2?-2:2); group.add(p);
            }
            // Etagères & Marchandises
            for(let h=1; h<5; h+=1.5) {
                const shelf = new THREE.Mesh(new THREE.BoxGeometry(2.1, 0.05, 4.1), frameMat);
                shelf.position.y = h; group.add(shelf);
                // Simulation de cartons (comme sur la photo)
                for(let k=0; k<3; k++) {
                    const box = new THREE.Mesh(new THREE.BoxGeometry(0.8, 0.8, 0.8), new THREE.MeshStandardMaterial({color: Math.random()>0.5?0x00aaff:0x885522}));
                    box.position.set(0, h+0.4, (k-1)*1.2); group.add(box);
                }
            }
            group.position.set(x, 0, z); scene.add(group);
        }
        [-12, -8, 8, 12].forEach(x => createIndustrialRack(x, 0));

        // --- TRANSPALETTE ---
        function createTranspal(x, z, r) {
            const t = new THREE.Group();
            const body = new THREE.Mesh(new THREE.BoxGeometry(0.5, 0.8, 0.4), new THREE.MeshStandardMaterial({color: 0xffaa00}));
            body.position.y = 0.5; t.add(body);
            const forks = new THREE.Mesh(new THREE.BoxGeometry(1.2, 0.1, 0.4), new THREE.MeshStandardMaterial({color: 0x333333}));
            forks.position.set(0.6, 0.15, 0); t.add(forks);
            t.position.set(x,0,z); t.rotation.y = r; scene.add(t);
        }
        createTranspal(4, 5, Math.PI/3);

        // --- CHAMBRES OXYONE ---
        const units = [];
        function createOxyone(posX, id) {
            const group = new THREE.Group();
            // Corps principal
            const body = new THREE.Mesh(new THREE.BoxGeometry(L, H, W), new THREE.MeshStandardMaterial({color: 0x00aaff, transparent:true, opacity:0.15}));
            body.position.y = H/2; group.add(body);
            // Structure cadre
            const frame = new THREE.BoxHelper(body, 0x888888); group.add(frame);
            // Porte
            const door = new THREE.Mesh(new THREE.BoxGeometry(0.9, 1.8, 0.12), new THREE.MeshStandardMaterial({color: 0x222222}));
            door.position.set(0, 0.9, W/2); group.add(door);
            // Moteur sur le toit (comme photo)
            const motor = new THREE.Mesh(new THREE.BoxGeometry(1, 0.5, 1), new THREE.MeshStandardMaterial({color: 0xdddddd}));
            motor.position.set(0, H+0.25, 0); group.add(motor);
            // Zone BT au sol
            const bt = new THREE.Mesh(new THREE.RingGeometry(1.3, 1.5, 32), new THREE.MeshBasicMaterial({color: 0x00ffff, transparent:true, opacity:0.7, side:2}));
            bt.rotation.x = -Math.PI/2; bt.position.set(0, 0.05, W/2+2.5); group.add(bt);

            group.position.x = posX; scene.add(group);
            units.push({mat: body.material, bt, id});
        }
        createOxyone(-5, 'u1'); createOxyone(0, 'u2'); createOxyone(5, 'u3');

        // UI & ANIMATION
        const tS = document.getElementById('tSlider');
        const wS = document.getElementById('wSlider');

        function animate() {
            requestAnimationFrame(animate);
            const time = Date.now() * 0.001;
            document.getElementById('tVal').innerText = tS.value + ".0°C";
            document.getElementById('wVal').innerText = wS.value + " kg/m³";

            units.forEach((u, i) => {
                u.bt.material.opacity = 0.3 + Math.abs(Math.sin(time*2 + i))*0.5;
                if(wS.value > 250) {
                    u.mat.color.setHex(0xff3333);
                    document.getElementById(u.id).className = "unit-btn warn";
                } else {
                    u.mat.color.setHex(0x00aaff);
                    document.getElementById(u.id).className = "unit-btn ok";
                }
            });
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
